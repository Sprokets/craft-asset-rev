# CraftCMS Asset Rev (Cache Busting)
A Twig extension for CraftCMS that allows you to swap out asset file names with their revved version, as defined in a JSON manifest file.

Manifest files would most likely be generated by Grunt/Gulp modules, such as `filerev-assets`.

## Why?
In order to speed up the load time of your pages, you can set a far-future expires headers on your images, stylesheets and javascript. However, when you update those assets you'll need to update their file names to force the browser download the updated version.

You *could* append a query string to the asset url (e.g. `css/main.css?v=24`), but you should read [here](http://www.stevesouders.com/blog/2008/08/23/revving-filenames-dont-use-querystring/) to find out why that's not an ideal solution.

Using a Grunt or Gulp task to add a hash to asset file names and generate the manifest file is our preferred solution.

## Installation
Just copy the `assetrev` folder to your `craft/plugins` directory and activate it from the Craft plugin settings page.

Once activated you can use the `rev()` function in your templates.

## Example
```
    <link rel="stylesheet" href="{{ siteUrl }}{{ rev('css/main.css') }}">
```

`css/main.css` will be replaced with the corresponding hashed filename as defined in `resources/assets/assets.json`. 

If you'd like to store your `assets.json` file in another location, you will need to pass that through as a second argument.

```
    <link rel="stylesheet" href="{{ siteUrl }}{{ rev('css/main.css', '../assets/') }}">
```

### Manifest file example
```
    {
        "css/main.css": "css/main.a9961d38.css",
        "js/main.js": "js/main.786087f7.js"
    }
```

## Roadmap
- Allow the configuration of the `assets.json` file path within the admin area